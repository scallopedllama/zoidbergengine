<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>libnds: Graphics/Backgrounds/all_in_one/source/main.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="docs.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Graphics/Backgrounds/all_in_one/source/main.cpp</h1><div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;<a class="code" href="a00119.html" title="the master include file for nds applications.">nds.h</a>&gt;</span>

<span class="preprocessor">#include &lt;RotBackgrounds.h&gt;</span>
<span class="preprocessor">#include &lt;TextBackgrounds.h&gt;</span>
<span class="preprocessor">#include &lt;Multilayer.h&gt;</span>

<span class="preprocessor">#include &lt;stdio.h&gt;</span>
<span class="preprocessor">#include &lt;stdlib.h&gt;</span>



<span class="comment">//function prototypes</span>
<span class="keywordtype">void</span> HandMadeTiles(<span class="keywordtype">void</span>);

<span class="keywordtype">void</span> Text256x256(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> Text256x512(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> Text512x256(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> Text512x512(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> ExRot128x128(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> ExRot256x256(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> ExRot512x512(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> ExRot1024x1024(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> Rot128x128(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> Rot256x256(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> Rot512x512(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> Rot1024x1024(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> Bmp8_128x128(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> Bmp8_256x256(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> Bmp8_512x256(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> Bmp8_512x512(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> Bmp8_512x1024(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> Bmp8_1024x512(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> Bmp16_128x128(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> Bmp16_512x256(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> Bmp16_256x256(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> Bmp16_512x512(<span class="keywordtype">void</span>);


<span class="keywordtype">void</span> scrollText(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> scrollRotation(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> scrollVertical(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> scrollHorizontalText(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> scrollHorizontalExRotation(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> scroll4wayText(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> scroll4wayExRotation(<span class="keywordtype">void</span>);

<span class="keywordtype">void</span> advMosaic(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> advRotating(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> advScaling(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> advExtendedPalette(<span class="keywordtype">void</span>);
<span class="keywordtype">void</span> advMultipleLayers(<span class="keywordtype">void</span>);


<span class="keyword">struct </span>Demo
{
    fp go;
    <span class="keyword">const</span> <span class="keywordtype">char</span>* name;
    <span class="keyword">const</span> <span class="keywordtype">char</span>* description;
};

<span class="keyword">struct </span>Category
{
    <span class="keyword">const</span> <span class="keywordtype">char</span>* name;
    Demo *demos;
    <span class="keywordtype">int</span> count;
};

<span class="keyword">struct </span>Demo basicExamples[] =
{ 
    {HandMadeTiles, <span class="stringliteral">&quot;Handmade Text 256x256&quot;</span>, <span class="stringliteral">&quot;Displays a handmade 256 x 256 Text background&quot;</span>},
    
    {Text256x256, <span class="stringliteral">&quot;Text 256x256&quot;</span>, <span class="stringliteral">&quot;Displays a 256 x 256 Text background&quot;</span>},
    {Text256x512, <span class="stringliteral">&quot;Text 256x512&quot;</span>, <span class="stringliteral">&quot;Displays a 256 x 512 Text background&quot;</span>},
    {Text512x256, <span class="stringliteral">&quot;Text 512x256&quot;</span>, <span class="stringliteral">&quot;Displays a 512 x 256 Text background&quot;</span>},
    {Text512x512, <span class="stringliteral">&quot;Text 512x512&quot;</span>, <span class="stringliteral">&quot;Displays a 512 x 512 Text background&quot;</span>},
    
    {ExRot128x128, <span class="stringliteral">&quot;Extended Rotation 128x128&quot;</span>, <span class="stringliteral">&quot;Displays a 128 x 128 Extended Rotation background&quot;</span>},
    {ExRot256x256, <span class="stringliteral">&quot;Extended Rotation 256x256&quot;</span>, <span class="stringliteral">&quot;Displays a 256 x 256 Extended Rotation background&quot;</span>},
    {ExRot512x512, <span class="stringliteral">&quot;Extended Rotation 512x512&quot;</span>, <span class="stringliteral">&quot;Displays a 512 x 512 Extended Rotation background&quot;</span>},
    {ExRot1024x1024, <span class="stringliteral">&quot;Extended Rotation 1024x1024&quot;</span>, <span class="stringliteral">&quot;Displays a 1024 x 1024 Extended Rotation background&quot;</span>},
    
    {Rot128x128, <span class="stringliteral">&quot;Rotation 128x128&quot;</span>, <span class="stringliteral">&quot;Displays a 256 x 256 Rotation background&quot;</span>},
    {Rot256x256, <span class="stringliteral">&quot;Rotation 256x256&quot;</span>, <span class="stringliteral">&quot;Displays a 256 x 256 Rotation background&quot;</span>},
    {Rot512x512, <span class="stringliteral">&quot;Rotation 512x512&quot;</span>, <span class="stringliteral">&quot;Displays a 512 x 512 Rotation background&quot;</span>},
    {Rot1024x1024, <span class="stringliteral">&quot;Rotation 1024x1024&quot;</span>, <span class="stringliteral">&quot;Displays a 1024 x 1024 Rotation background&quot;</span>},

    
};

<span class="keyword">struct </span>Demo bitmapExamples[] = 
{
    {Bmp8_128x128, <span class="stringliteral">&quot;256 color 128x128&quot;</span>, <span class="stringliteral">&quot;Displays a 128 x 128 Bitmap background&quot;</span>},
    {Bmp8_256x256, <span class="stringliteral">&quot;256 color 256x256&quot;</span>, <span class="stringliteral">&quot;Displays a 256 x 256 Bitmap background&quot;</span>},
    {Bmp8_512x256, <span class="stringliteral">&quot;256 color  512x256&quot;</span>, <span class="stringliteral">&quot;Displays a 512 x 256 Bitmap background&quot;</span>},
    {Bmp8_512x512, <span class="stringliteral">&quot;256 color  512x512&quot;</span>, <span class="stringliteral">&quot;Displays a 512 x 512 Bitmap background&quot;</span>},
    {Bmp8_512x1024, <span class="stringliteral">&quot;256 color  512x1024&quot;</span>, <span class="stringliteral">&quot;Displays a 512 x 1024 Bitmap background&quot;</span>},
    {Bmp8_1024x512, <span class="stringliteral">&quot;256 color  1024x512&quot;</span>, <span class="stringliteral">&quot;Displays a 1024 x 512 Bitmap background&quot;</span>},
    
    {Bmp16_128x128, <span class="stringliteral">&quot;16-bit color 128x128&quot;</span>, <span class="stringliteral">&quot;Displays a 128 x 128 Bitmap background&quot;</span>},
    {Bmp16_256x256, <span class="stringliteral">&quot;16-bit color  256x256&quot;</span>, <span class="stringliteral">&quot;Displays a 256 x 256 Bitmap background&quot;</span>},
    {Bmp16_512x256, <span class="stringliteral">&quot;16-bit color  512x256&quot;</span>, <span class="stringliteral">&quot;Displays a 512 x 256 Bitmap background&quot;</span>},
    {Bmp16_512x512, <span class="stringliteral">&quot;16-bit color  512x512&quot;</span>, <span class="stringliteral">&quot;Displays a 512 x 512 Bitmap background&quot;</span>},
    

};

<span class="keyword">struct </span>Demo scrollingExamples[] =
{
    {scrollText, <span class="stringliteral">&quot;Text Backgrounds&quot;</span>, <span class="stringliteral">&quot;Hardware Scrolling of a Text background&quot;</span>},
    {scrollRotation, <span class="stringliteral">&quot;Rot Backgrounds&quot;</span>, <span class="stringliteral">&quot;Hardware Scrolling of a Rotation background&quot;</span>},
    {scrollVertical, <span class="stringliteral">&quot;Vertical Scrolling&quot;</span>, <span class="stringliteral">&quot;Scrolling a large map vertically&quot;</span>},
    {scrollHorizontalText, <span class="stringliteral">&quot;Horizontal Scrolling (Text)&quot;</span>, <span class="stringliteral">&quot;Scrolling a large map horzontally on a text background&quot;</span>},
    {scrollHorizontalExRotation, <span class="stringliteral">&quot;Horizontal Scrolling (ExRot)&quot;</span>, <span class="stringliteral">&quot;Scrolling a large map horzontally on an extended rotation background&quot;</span>},
    {scroll4wayText, <span class="stringliteral">&quot;4 Way Scrolling (Text)&quot;</span>, <span class="stringliteral">&quot;Scrolling a large map 4 ways on a text background&quot;</span>},
    {scroll4wayExRotation, <span class="stringliteral">&quot;4 Way Scrolling (Rotation)&quot;</span>, <span class="stringliteral">&quot;Scrolling a large map 4 ways on a ex rotation background&quot;</span>},

};

<span class="keyword">struct </span>Demo advancedExamples[] =
{
    {advMosaic, <span class="stringliteral">&quot;Mosaic&quot;</span>, <span class="stringliteral">&quot;A demo of the Mosaic scaling&quot;</span>},
    {advRotating, <span class="stringliteral">&quot;Rotation&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
    {advScaling, <span class="stringliteral">&quot;Scaling&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
    {advExtendedPalette, <span class="stringliteral">&quot;Extended Palette&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
    {advMultipleLayers, <span class="stringliteral">&quot;Multiple Text Layers&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},

};

<span class="keyword">struct </span>Category categories[] = 
{
    {<span class="stringliteral">&quot;Basic&quot;</span>, basicExamples, <span class="keyword">sizeof</span>(basicExamples) / <span class="keyword">sizeof</span>(Demo)},
    {<span class="stringliteral">&quot;Bitmap&quot;</span>, bitmapExamples, <span class="keyword">sizeof</span>(bitmapExamples) / <span class="keyword">sizeof</span>(Demo)},
    {<span class="stringliteral">&quot;Scrolling&quot;</span>, scrollingExamples, <span class="keyword">sizeof</span>(scrollingExamples) / <span class="keyword">sizeof</span>(Demo)},
    {<span class="stringliteral">&quot;Advanced&quot;</span>, advancedExamples, <span class="keyword">sizeof</span>(advancedExamples) / <span class="keyword">sizeof</span>(Demo)}

};

<span class="comment">//---------------------------------------------------------------------------------</span>
<span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {
<span class="comment">//---------------------------------------------------------------------------------</span>
    <span class="keywordtype">int</span> keys;
    

    
    <span class="keywordflow">while</span>(1) {
        <span class="keywordtype">int</span> selectedCategory = 0;
        <span class="keywordtype">int</span> selectedDemo = 0;
        
        <span class="keywordtype">bool</span> selected = <span class="keyword">false</span>;
        
        <span class="keywordtype">int</span> catCount = <span class="keyword">sizeof</span>(categories) / <span class="keyword">sizeof</span>(Category);
        <span class="keywordtype">int</span> demoCount = 0;
        
        <a name="a0"></a><a class="code" href="a00135.html#a9512ccda7405589119053638849cc56d" title="the sub 2D engine video mode">videoSetModeSub</a>(<a name="a1"></a><a class="code" href="a00135.html#a1e46218ee302fcc8c77e4ea0968ea149a9cdd63a31b19e5ff101d468d2af31fe6" title="4 2D backgrounds">MODE_0_2D</a>);
        <a name="a2"></a><a class="code" href="a00096.html#a2fb290779a23a2ccf4da6097d83d8323" title="Initialize the console to a default state for prototyping. This function sets the...">consoleDemoInit</a>();
        
        <span class="keywordflow">while</span>(!selected) {

            <a name="a3"></a><a class="code" href="a00109.html#af4e9294843965705093b39673ddbb2b4" title="Obtains the current keypad state. Call this function once per main loop in order...">scanKeys</a>();
            
            keys = <a name="a4"></a><a class="code" href="a00109.html#a53b39b35dd9e47f94dac068da0cfa080" title="Obtains the current keypad pressed state.">keysDown</a>();
            
            <span class="keywordflow">if</span>(keys &amp; <a name="a5"></a><a class="code" href="a00110.html#aa27cad8fa018a58930b6622783a83072a0848a442d907968b211b97bc2bd88acd" title="Keypad UP button.">KEY_UP</a>) selectedCategory--;
            <span class="keywordflow">if</span>(keys &amp; <a name="a6"></a><a class="code" href="a00110.html#aa27cad8fa018a58930b6622783a83072aa9cdac7967bf7d88fdb761138a2a3416" title="Keypad DOWN button.">KEY_DOWN</a>) selectedCategory++;
            <span class="keywordflow">if</span>(keys &amp; <a name="a7"></a><a class="code" href="a00110.html#aa27cad8fa018a58930b6622783a83072aa7b3a3d0503a46bec51c6e3da95747cc" title="Keypad A button.">KEY_A</a>) selected = <span class="keyword">true</span>;
            
            <span class="keywordflow">if</span>(selectedCategory &lt; 0) selectedCategory = catCount - 1;
            <span class="keywordflow">if</span>(selectedCategory &gt;= catCount) selectedCategory = 0;
            
            <a name="a8"></a><a class="code" href="a00111.html#a1e8361fc4819e3f39d187dc5c29c279a" title="Wait for vblank interrupt.">swiWaitForVBlank</a>();
            <a name="a9"></a><a class="code" href="a00096.html#ac62c34a3fa2a6403c690dd80022b3e34" title="Clears the screan by iprintf(&amp;quot;\x1b[2J&amp;quot;);.">consoleClear</a>();
            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> ci = 0; ci &lt; catCount; ci++) {
                iprintf(<span class="stringliteral">&quot;%c%d: %s\n&quot;</span>, ci == selectedCategory ? <span class="charliteral">&#39;*&#39;</span> : <span class="charliteral">&#39; &#39;</span>, ci + 1, categories[ci].name);         
            }   
        }
        
        selected = <span class="keyword">false</span>;
        
        demoCount = categories[selectedCategory].count;
        
        <span class="keywordflow">while</span>(!selected) {

            <a class="code" href="a00109.html#af4e9294843965705093b39673ddbb2b4" title="Obtains the current keypad state. Call this function once per main loop in order...">scanKeys</a>();
            
            keys = <a class="code" href="a00109.html#a53b39b35dd9e47f94dac068da0cfa080" title="Obtains the current keypad pressed state.">keysDown</a>();
            
            <span class="keywordflow">if</span>(keys &amp; KEY_UP) selectedDemo--;
            <span class="keywordflow">if</span>(keys &amp; KEY_DOWN) selectedDemo++;
            <span class="keywordflow">if</span>(keys &amp; KEY_A) selected = <span class="keyword">true</span>;
            <span class="keywordflow">if</span>(keys &amp; <a name="a10"></a><a class="code" href="a00110.html#aa27cad8fa018a58930b6622783a83072a10072b5ee7aa1faf316434ecc9e2bb3a" title="Keypad B button.">KEY_B</a>) <span class="keywordflow">break</span>;
            
            <span class="keywordflow">if</span>(selectedDemo &lt; 0) selectedDemo = demoCount - 1;
            <span class="keywordflow">if</span>(selectedDemo &gt;= demoCount) selectedDemo = 0;
            
            <a class="code" href="a00111.html#a1e8361fc4819e3f39d187dc5c29c279a" title="Wait for vblank interrupt.">swiWaitForVBlank</a>();
            <a class="code" href="a00096.html#ac62c34a3fa2a6403c690dd80022b3e34" title="Clears the screan by iprintf(&amp;quot;\x1b[2J&amp;quot;);.">consoleClear</a>();

            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> di = 0; di &lt; demoCount; di++) {
                iprintf(<span class="stringliteral">&quot;%c%d: %s\n&quot;</span>, di == selectedDemo ? <span class="charliteral">&#39;*&#39;</span> : <span class="charliteral">&#39; &#39;</span>, di + 1, categories[selectedCategory].demos[di].name);         
            }   
        }
        
        <span class="keywordflow">if</span>(selected) {
            <a class="code" href="a00096.html#ac62c34a3fa2a6403c690dd80022b3e34" title="Clears the screan by iprintf(&amp;quot;\x1b[2J&amp;quot;);.">consoleClear</a>();
            iprintf(<span class="stringliteral">&quot;Use arrow keys to scroll\nPress &#39;B&#39; to exit&quot;</span>);
            categories[selectedCategory].demos[selectedDemo].go();
        }
    }
    
}


</pre></div> </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Mon Jul 26 10:36:03 2010 for libnds by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
