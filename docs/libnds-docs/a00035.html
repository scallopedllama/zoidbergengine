<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>libnds: Graphics/3D/3D_Both_Screens/source/template.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="docs.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Graphics/3D/3D_Both_Screens/source/template.c</h1><div class="fragment"><pre class="fragment"><span class="comment">//-------------------------------------------------------</span>
<span class="comment">//</span>
<span class="comment">//  3D on both screens</span>
<span class="comment">//      Jason Rogers  (aka Dovoto)</span>
<span class="comment">//</span>
<span class="comment">//-------------------------------------------------------</span>
 
<span class="preprocessor">#include &lt;<a class="code" href="a00119.html" title="the master include file for nds applications.">nds.h</a>&gt;</span>
 
<span class="comment">//-------------------------------------------------------</span>
<span class="keywordtype">void</span> renderCube(<span class="keywordtype">int</span> angle){
<span class="comment">//-------------------------------------------------------</span>
 
    <a name="a0"></a><a class="code" href="a00136.html#adc07d63d8e4fdf97bed3e6c5199b9ced" title="Pushes the current matrix onto the stack  GBATEK http://nocash.emubase.de/gbatek...">glPushMatrix</a>();
    <a name="a1"></a><a class="code" href="a00136.html#a15ee4820b85ebc3888ae2bdde39ed58e" title="multiply the current matrix by a translation matrix  GBATEK http://nocash.emubase...">glTranslatef</a>(0, 0, -4);
    <a name="a2"></a><a class="code" href="a00136.html#aaf464cf354a4710e705787930ff96f16" title="Rotates the model view matrix by angle about the specified unit vector.">glRotatef32i</a>(<a name="a3"></a><a class="code" href="a00134.html#ab0d221ab9d706fada78cd7580cd06bb1" title="convert an angle in 360 degree format to the format used by libnds.">degreesToAngle</a>(angle), <a name="a4"></a><a class="code" href="a00136.html#ab9a861196428fb2e7380dcb03b7a97ee" title="convert int to f32">inttof32</a>(1), <a class="code" href="a00136.html#ab9a861196428fb2e7380dcb03b7a97ee" title="convert int to f32">inttof32</a>(1), <a class="code" href="a00136.html#ab9a861196428fb2e7380dcb03b7a97ee" title="convert int to f32">inttof32</a>(1)); 
    
    <a name="a5"></a><a class="code" href="a00136.html#aa767ddea14a9219a8fc2a4a4645eea58" title="Starts a polygon group.">glBegin</a>(<a name="a6"></a><a class="code" href="a00136.html#a0e589918d10f56cda0c48e6f1dd389e9aab4577ef231a4142312b13d957352ed3">GL_QUADS</a>);
        <a name="a7"></a><a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,0,0);     <a name="a8"></a><a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f,  1.0f,  1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,255,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f,  1.0f,  1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,0,255);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f, -1.0f,  1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,255,0);   <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f, -1.0f,  1.0f);                    

        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,0,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f,  1.0f, -1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,255,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f,  1.0f, -1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,0,255);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f, -1.0f, -1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,255,0);   <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f, -1.0f, -1.0f);                    

        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,0,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f,  1.0f,  1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,255,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f,  1.0f,  1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,0,255);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f,  1.0f, -1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,255,0);   <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f,  1.0f, -1.0f);                    

        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,0,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f, -1.0f,  1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,255,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f, -1.0f,  1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,0,255);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f, -1.0f, -1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,255,0);   <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f, -1.0f, -1.0f);                    

        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,0,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f, 1.0f,  -1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,255,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f, 1.0f,   1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,0,255);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f,-1.0f,   1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,255,0);   <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f,-1.0f,  -1.0f);                    

        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,0,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f, 1.0f,  -1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,255,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f, 1.0f,   1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,0,255);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f,-1.0f,   1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,255,0);   <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f,-1.0f,  -1.0f);                    

    <a name="a9"></a><a class="code" href="a00136.html#a9ba38906fa947236e63af2a29644775e" title="Ends a polygon group, this seems to be a dummy function that does absolutely nothing...">glEnd</a>();
 
    <a name="a10"></a><a class="code" href="a00136.html#accbd33aa10c42871ee362357f7d974c8" title="Pops num matrices off the stack  GBATEK http://nocash.emubase.de/gbatek.htm#ds3dmatrixstack...">glPopMatrix</a>(1);
}
 
 
<span class="comment">//-------------------------------------------------------</span>
<span class="keywordtype">void</span> renderPyramid(<span class="keywordtype">int</span> angle){
<span class="comment">//-------------------------------------------------------</span>
 
    <a class="code" href="a00136.html#adc07d63d8e4fdf97bed3e6c5199b9ced" title="Pushes the current matrix onto the stack  GBATEK http://nocash.emubase.de/gbatek...">glPushMatrix</a>();
    <a class="code" href="a00136.html#a15ee4820b85ebc3888ae2bdde39ed58e" title="multiply the current matrix by a translation matrix  GBATEK http://nocash.emubase...">glTranslatef</a>(0, 0, -4);
    <a class="code" href="a00136.html#aaf464cf354a4710e705787930ff96f16" title="Rotates the model view matrix by angle about the specified unit vector.">glRotatef32i</a>(<a class="code" href="a00134.html#ab0d221ab9d706fada78cd7580cd06bb1" title="convert an angle in 360 degree format to the format used by libnds.">degreesToAngle</a>(angle), <a class="code" href="a00136.html#ab9a861196428fb2e7380dcb03b7a97ee" title="convert int to f32">inttof32</a>(1),<a class="code" href="a00136.html#ab9a861196428fb2e7380dcb03b7a97ee" title="convert int to f32">inttof32</a>(1),<a class="code" href="a00136.html#ab9a861196428fb2e7380dcb03b7a97ee" title="convert int to f32">inttof32</a>(1)); 
    
    <a class="code" href="a00136.html#aa767ddea14a9219a8fc2a4a4645eea58" title="Starts a polygon group.">glBegin</a>(<a class="code" href="a00136.html#a0e589918d10f56cda0c48e6f1dd389e9aab4577ef231a4142312b13d957352ed3">GL_QUADS</a>);
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,0,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f, -1.0f,  1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,255,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f, -1.0f,  1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,0,255);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f, -1.0f, -1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,255,0);   <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f, -1.0f, -1.0f);                    
    <a class="code" href="a00136.html#a9ba38906fa947236e63af2a29644775e" title="Ends a polygon group, this seems to be a dummy function that does absolutely nothing...">glEnd</a>();

    <a class="code" href="a00136.html#aa767ddea14a9219a8fc2a4a4645eea58" title="Starts a polygon group.">glBegin</a>(<a name="a11"></a><a class="code" href="a00136.html#a0e589918d10f56cda0c48e6f1dd389e9acc7d680eddc73989e6650e72ad0b6ac7">GL_TRIANGLES</a>);
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,0,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 0.0f,  1.0f,  0.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,255,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f, -1.0f,  1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,0,255);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f, -1.0f,  1.0f);                    

        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,0,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 0.0f,  1.0f,  0.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,255,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f, -1.0f, -1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,0,255);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f, -1.0f, -1.0f);                    

        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,0,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 0.0f,  1.0f,  0.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,255,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f, -1.0f,  1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,0,255);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>(-1.0f, -1.0f, -1.0f);                    

        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(255,0,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 0.0f,  1.0f,  0.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,255,0);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f, -1.0f,  1.0f);                    
        <a class="code" href="a00136.html#a6fa02abca6eea8ce7f78eb7f66ffa0b1" title="Set the color for following vertices.">glColor3b</a>(0,0,255);     <a class="code" href="a00136.html#a9237e35f838d025ed42e566ad237b6da" title="specifies a vertex location">glVertex3f</a>( 1.0f, -1.0f, -1.0f);                    
    <a class="code" href="a00136.html#a9ba38906fa947236e63af2a29644775e" title="Ends a polygon group, this seems to be a dummy function that does absolutely nothing...">glEnd</a>();
 
    <a class="code" href="a00136.html#accbd33aa10c42871ee362357f7d974c8" title="Pops num matrices off the stack  GBATEK http://nocash.emubase.de/gbatek.htm#ds3dmatrixstack...">glPopMatrix</a>(1);
}
 
<span class="comment">//-------------------------------------------------------</span>
<span class="keywordtype">void</span> renderScene(<span class="keywordtype">bool</span> top){
<span class="comment">//-------------------------------------------------------</span>
    <span class="keyword">static</span> <span class="keywordtype">short</span> angle = 0;
 
    <span class="keywordflow">if</span>(top)
        renderCube(angle);
    <span class="keywordflow">else</span>
        renderPyramid(angle);

    angle++;
}
 
 
<span class="comment">//-------------------------------------------------------</span>
<span class="comment">// set up a 2D layer construced of bitmap sprites</span>
<span class="comment">// this holds the image when rendering to the top screen</span>
<span class="comment">//-------------------------------------------------------</span>
<span class="keywordtype">void</span> initSubSprites(<span class="keywordtype">void</span>){
<span class="comment">//-------------------------------------------------------</span>
 
    <a name="a12"></a><a class="code" href="a00129.html#a587040de52390a390d84d8c6d5eca646" title="Initializes the 2D sprite engine In order to mix tiled and bitmap sprites use SpriteMapping_Bmp_1D_1...">oamInit</a>(&amp;<a name="a13"></a>oamSub, <a name="a14"></a><a class="code" href="a00129.html#a4f529677a022eb1fe1d85c3ce65b2acea3637a0621b9670bffd5905f81f2135cd" title="2D bitmap mapping 256 pixels wide bitmap">SpriteMapping_Bmp_2D_256</a>, <span class="keyword">false</span>);
 
    <span class="keywordtype">int</span> x = 0;
    <span class="keywordtype">int</span> y = 0;
 
    <span class="keywordtype">int</span> <span class="keywordtype">id</span> = 0;

    <span class="comment">//set up a 4x3 grid of 64x64 sprites to cover the screen</span>
    <span class="keywordflow">for</span>(y = 0; y &lt; 3; y++)
    <span class="keywordflow">for</span>(x = 0; x &lt; 4; x++)
    {
    <span class="comment">/*  u16 *offset = &amp;SPRITE_GFX_SUB[(x * 64) + (y * 64 * 256)];</span>
<span class="comment"> </span>
<span class="comment">        oamSet(&amp;oamSub, x + y * 4, x * 64, y * 64, 0, 15, SpriteSize_64x64, </span>
<span class="comment">            SpriteColorFormat_Bmp, offset, -1, false,false,false,false,false);</span>
<span class="comment">    */</span>
        <a class="code" href="a00129.html#a4668bcb85cca988d2f0cef626fa5f0ba" title="oamSub an object representing the sub 2D engine">oamSub</a>.<a name="a15"></a><a class="code" href="a00075.html#ad1039d953aa4a57dd5b9b58b455eaeca" title="pointer to shadow oam memory">oamMemory</a>[id].<a name="a16"></a>attribute[0] = ATTR0_BMP | ATTR0_SQUARE | (64 * y);
        <a class="code" href="a00129.html#a4668bcb85cca988d2f0cef626fa5f0ba" title="oamSub an object representing the sub 2D engine">oamSub</a>.<a class="code" href="a00075.html#ad1039d953aa4a57dd5b9b58b455eaeca" title="pointer to shadow oam memory">oamMemory</a>[id].attribute[1] = ATTR1_SIZE_64 | (64 * x);
        <a class="code" href="a00129.html#a4668bcb85cca988d2f0cef626fa5f0ba" title="oamSub an object representing the sub 2D engine">oamSub</a>.<a class="code" href="a00075.html#ad1039d953aa4a57dd5b9b58b455eaeca" title="pointer to shadow oam memory">oamMemory</a>[id].attribute[2] = ATTR2_ALPHA(1) | (8 * 32 * y) | (8 * x);
        <span class="keywordtype">id</span>++;
    }
 
    <a name="a17"></a><a class="code" href="a00111.html#a1e8361fc4819e3f39d187dc5c29c279a" title="Wait for vblank interrupt.">swiWaitForVBlank</a>();
 
    <a name="a18"></a><a class="code" href="a00129.html#a4cd19004499e63efb1ed5e04d4039785" title="causes oam memory to be updated...must be called during vblank if using oam api">oamUpdate</a>(&amp;oamSub);
}
<span class="comment">//-------------------------------------------------------</span>
<span class="keywordtype">int</span> main() {        
<span class="comment">//-------------------------------------------------------</span>
 
    <a name="a19"></a><a class="code" href="a00135.html#ae3ea5c2e57cc40d6a88e21c4dcb742c8" title="the main 2D engine video mode">videoSetMode</a>(<a name="a20"></a><a class="code" href="a00135.html#a1e46218ee302fcc8c77e4ea0968ea149af75d73d6670d95a0cec81b8e648a0dca" title="3 2D backgrounds 1 3D background (Main engine only)">MODE_0_3D</a>);
    <a name="a21"></a><a class="code" href="a00135.html#a9512ccda7405589119053638849cc56d" title="the sub 2D engine video mode">videoSetModeSub</a>(<a name="a22"></a><a class="code" href="a00135.html#a1e46218ee302fcc8c77e4ea0968ea149a0b2ab161193b83723dd8cc633c168fab" title="4 2D backgrounds">MODE_5_2D</a>);
 
    <a name="a23"></a><a class="code" href="a00136.html#a29390b4085e778ee80b07b46efd4b2ca" title="Initializes the gl state machine (must be called once before using gl calls).">glInit</a>();
 
    <span class="comment">// sub sprites hold the bottom image when 3D directed to top</span>
    initSubSprites();
 
    <span class="comment">// sub background holds the top image when 3D directed to bottom</span>
    <a name="a24"></a><a class="code" href="a00140.html#ga2d344f63752fcf9b001090baa46535f5" title="Initializes a background on the sub display Sets up background control register with...">bgInitSub</a>(3, <a name="a25"></a><a class="code" href="a00140.html#gga421d43ca799fd0c471335846da06cae1a1e362913a3cbff9fceb211e5e3b1cff9" title="Bitmap background with 16 bit color values of the form aBBBBBGGGGGRRRRR (if &amp;#39;a&amp;#39;...">BgType_Bmp16</a>, <a name="a26"></a><a class="code" href="a00140.html#gga6bd2253ebf93a399fa956a2a7b8b6b3ba1ddf5418a6eabc5cab25af5ebc377efd">BgSize_B16_256x256</a>, 0, 0);
 
<span class="comment">//-------------------------------------------------------</span>
<span class="comment">//   Setup gl</span>
<span class="comment">//-------------------------------------------------------</span>
    <a name="a27"></a><a class="code" href="a00136.html#acc179be4d402924ed239617a6aa422f2" title="Enables various gl states (blend, alpha test, etc..).">glEnable</a>(<a name="a28"></a><a class="code" href="a00136.html#a09e37320519ef82d47501185b7a76931aeb3eb07748974534a5a9ab69d190a3ad">GL_ANTIALIAS</a>);
 
    <a name="a29"></a><a class="code" href="a00136.html#a47af9a2279197ba4d95467cc0741f117" title="sets the color of the rear-plane(a.k.a Clear Color/Plane)">glClearColor</a>(0,0,0,31); 
    <a name="a30"></a><a class="code" href="a00136.html#a0316399378018c0409a78580cb1166a9" title="sets the polygon ID of the rear-plane(a.k.a. Clear/Color Plane), useful for antialiasing...">glClearPolyID</a>(63);
    <a name="a31"></a><a class="code" href="a00136.html#acf0b19102499eed4547a6cac367e51ef" title="reset the depth buffer to this value; generally set this to GL_MAX_DEPTH.  GBATEK...">glClearDepth</a>(0x7FFF);
 
    <a name="a32"></a><a class="code" href="a00136.html#a2dca9bf8f906cf5d97f7c11b6e7f3505" title="specify the viewport for following drawing, can be set several times per frame. ...">glViewport</a>(0,0,255,191);
 
    <a name="a33"></a><a class="code" href="a00136.html#a0735cc3f765138aeda473865ee1ecce6" title="change the current matrix mode  GBATEK http://nocash.emubase.de/gbatek.htm#ds3dmatrixloadmultiply...">glMatrixMode</a>(<a name="a34"></a><a class="code" href="a00136.html#a2d4b5d945cec30e7c025823f0447c2b4a9f052b4ec4987e02bae380daff5fa634">GL_PROJECTION</a>);
    <a name="a35"></a><a class="code" href="a00136.html#a3dbf4d6316eb7640e507572fe2612b70" title="loads an identity matrix to the current matrix, same as glIdentity(void)">glLoadIdentity</a>();
    <a name="a36"></a><a class="code" href="a00136.html#ab40589d7691759f889108bd71fbf10b1" title="Utility function which sets up the projection matrix (floating point version).">gluPerspective</a>(70, 256.0 / 192.0, 0.1, 100);
 
    <a name="a37"></a><a class="code" href="a00136.html#aad676c90bbd04d6cc1393d6c93f852c0" title="Set the parameters for polygons rendered on the current frame  GBATEK http://nocash...">glPolyFmt</a>(<a name="a38"></a><a class="code" href="a00136.html#a04ca9bdfcc44641cccf53aa338888b3c" title="used in glPolyFmt() to set the alpha level for the following polygons, set to 0 for...">POLY_ALPHA</a>(31) | <a name="a39"></a><a class="code" href="a00136.html#ac9ed764e909c0619b9abd34fb93f2b3cabd16e90881f219228faa391e2d396a07">POLY_CULL_NONE</a>);
 
<span class="comment">//-------------------------------------------------------</span>
<span class="comment">//   main loop</span>
<span class="comment">//-------------------------------------------------------</span>
    <span class="keywordtype">bool</span> top = <span class="keyword">true</span>;
 
    <span class="keywordflow">while</span> (<span class="keyword">true</span>) 
    {
        <span class="comment">// wait for capture unit to be ready</span>
        <span class="keywordflow">while</span>(REG_DISPCAPCNT &amp; DCAP_ENABLE);
 
        <span class="comment">//-------------------------------------------------------</span>
        <span class="comment">//   Switch render targets</span>
        <span class="comment">//-------------------------------------------------------</span>
        top = !top;
 
        <span class="keywordflow">if</span>(top)
        {
            <a name="a40"></a><a class="code" href="a00130.html#afd135d0b6703f98902d32aed3f7bf115" title="Forces the main core to display on the bottom.">lcdMainOnBottom</a>();
            <a name="a41"></a><a class="code" href="a00135.html#a874747fe1ee1fbfa089f3c40de912b02" title="Set bank C to the indicated mapping.">vramSetBankC</a>(<a name="a42"></a><a class="code" href="a00135.html#a3bce26742d17eb8c77cf7338089f3ccfa3f42b54798245a75b870e093c0140b39" title="maps vram c to lcd.">VRAM_C_LCD</a>);
            <a name="a43"></a><a class="code" href="a00135.html#a694882dbdce2f11d74984ae51758bd63" title="Set bank D to the indicated mapping.">vramSetBankD</a>(<a name="a44"></a><a class="code" href="a00135.html#aec1c55c4879c6c563ac5a814a0bde674a10690b0d1b48341877aa487cf600c578" title="maps vram d to sub engine sprites slot 0.">VRAM_D_SUB_SPRITE</a>);
            REG_DISPCAPCNT = DCAP_BANK(2) | DCAP_ENABLE | DCAP_SIZE(3);
        }
        <span class="keywordflow">else</span>
        {
            <a name="a45"></a><a class="code" href="a00130.html#a1ac0452f290abccc30614c5cbb0f56d0" title="Forces the main core to display on the top.">lcdMainOnTop</a>();
            <a class="code" href="a00135.html#a694882dbdce2f11d74984ae51758bd63" title="Set bank D to the indicated mapping.">vramSetBankD</a>(<a name="a46"></a><a class="code" href="a00135.html#aec1c55c4879c6c563ac5a814a0bde674a9ff8b22d7afb27165ae75fad1e3af51b" title="maps vram d to lcd.">VRAM_D_LCD</a>);
            <a class="code" href="a00135.html#a874747fe1ee1fbfa089f3c40de912b02" title="Set bank C to the indicated mapping.">vramSetBankC</a>(<a name="a47"></a><a class="code" href="a00135.html#a3bce26742d17eb8c77cf7338089f3ccfa7cb3c69e848e7b5f045e932ee1e41f94" title="maps vram c to sub engine background slot 0.">VRAM_C_SUB_BG</a>);
            REG_DISPCAPCNT = DCAP_BANK(3) | DCAP_ENABLE | DCAP_SIZE(3);
        }
 
        <span class="comment">//-------------------------------------------------------</span>
        <span class="comment">//   Render the scene</span>
        <span class="comment">//-------------------------------------------------------</span>
        <a class="code" href="a00136.html#a0735cc3f765138aeda473865ee1ecce6" title="change the current matrix mode  GBATEK http://nocash.emubase.de/gbatek.htm#ds3dmatrixloadmultiply...">glMatrixMode</a>(<a name="a48"></a><a class="code" href="a00136.html#a2d4b5d945cec30e7c025823f0447c2b4ab61b6af2524c193dafa434f0d39d5fbb">GL_MODELVIEW</a>);
 
        renderScene(top);
 
        <a name="a49"></a><a class="code" href="a00136.html#a11924dcc21af8cca165a1a553daf9235" title="Waits for a Vblank and swaps the buffers(like swiWaitForVBlank), but lets you specify...">glFlush</a>(0);
    }
 
    <span class="keywordflow">return</span> 0;
}
</pre></div> </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Mon Jul 26 10:36:03 2010 for libnds by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
